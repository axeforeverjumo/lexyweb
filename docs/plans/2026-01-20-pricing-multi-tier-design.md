# Dise√±o de Pricing Multi-Tier para LEXY

**Fecha:** 2026-01-20
**Estado:** Dise√±o aprobado - Listo para implementaci√≥n
**Objetivo:** Maximizar ingresos del segmento alto manteniendo diferenciaci√≥n premium

---

## üìä Resumen Ejecutivo

### Estrategia de Posicionamiento

**Premium con diferenciaci√≥n por valor real**, no por l√≠mites artificiales como la competencia.

- **Diferenciador clave:** Sistema de verificaci√≥n legal robusto + servicios humanos (formaci√≥n, success manager)
- **Entrada premium:** 65‚Ç¨ (vs. 19‚Ç¨ de competencia) - No competimos en precio, competimos en garant√≠a legal
- **Segmento objetivo:** Agencias medianas y grandes (BUSINESS y ENTERPRISE)
- **Ventaja competitiva:** Privacidad total (sin acceso a datos sensibles) + servicios de valor a√±adido

---

## üéØ Los 4 Tiers

### PRO - 65‚Ç¨/mes
**Target:** Agentes inmobiliarios individuales
**Tagline:** "Todo lo que necesitas para operar legalmente sin l√≠mites"

### TEAM - 150‚Ç¨/mes
**Target:** Agencias peque√±as (2-3 agentes)
**Tagline:** "Colabora con tu equipo, controla permisos, escala tu agencia"

### BUSINESS - 299‚Ç¨/mes
**Target:** Agencias medianas con necesidades de personalizaci√≥n
**Tagline:** "Tu marca, tus contratos, tu forma de trabajar"

### ENTERPRISE - 500‚Ç¨/mes
**Target:** Grandes grupos inmobiliarios y franquicias
**Tagline:** "Soluci√≥n enterprise con soporte dedicado y tu infraestructura"

---

## üìã Features Detalladas por Tier

### PRO - 65‚Ç¨/mes

#### USUARIOS Y ACCESO
- 1 usuario individual
- Acceso web + m√≥vil

#### CONTRATOS Y PLANTILLAS
- Contratos ilimitados generados/mes
- 97 plantillas legales verificadas (sector inmobiliario)
- Canvas de edici√≥n en tiempo real
- Firmas digitales integradas
- Env√≠o por WhatsApp/Email

#### IA Y CONSULTAS
- Consultas legales IA 24/7 ilimitadas
- Chats privados ilimitados
- Sistema de verificaci√≥n legal continua (sin acceso a datos sensibles)

#### SOPORTE
- Soporte 24/7 por Telegram (chat)
- Tiempo de respuesta: 24h laborables
- Base de conocimiento

#### OTROS
- 14 d√≠as de prueba gratis
- Sin permanencia
- Actualizaciones normativas autom√°ticas

---

### TEAM - 150‚Ç¨/mes

#### USUARIOS Y ACCESO
- Hasta 3 usuarios
- Gesti√≥n de permisos y roles
- Dashboard de administraci√≥n

#### COLABORACI√ìN ‚≠ê NUEVO
- **Chats compartidos entre equipo**
- **Chats personales privados**
- **Control de visibilidad** (t√∫ decides qui√©n ve qu√©)
- Carpetas de equipo compartidas

#### CONTRATOS Y PLANTILLAS
- Todo lo de PRO (ilimitado)
- Templates compartidos del equipo
- Historial de contratos del equipo

#### IA Y CONSULTAS
- Todo lo de PRO
- Chats compartidos con contexto del equipo

#### SOPORTE
- Soporte 24/7 por Telegram (chat)
- Tiempo de respuesta: 12h laborables
- Onboarding inicial (1 sesi√≥n)

---

### BUSINESS - 299‚Ç¨/mes

#### USUARIOS Y ACCESO
- Hasta 4 usuarios
- Todo lo de TEAM

#### PERSONALIZACI√ìN ‚≠ê NUEVO
- **Sube tus propios contratos personalizados**
- **Modifica plantillas existentes a tu gusto**
- **Whitelabel: Tu logo en todos los contratos**
- Biblioteca de contratos personalizados del equipo

#### CONTRATOS Y PLANTILLAS
- Todo lo de TEAM
- Editor avanzado de plantillas
- Versionado de contratos personalizados

#### IA Y CONSULTAS
- Todo lo de TEAM

#### SOPORTE Y FORMACI√ìN ‚≠ê NUEVO
- **Soporte prioritario 24/7: Telegram + Videollamadas de apoyo**
- Tiempo de respuesta: 4h laborables
- **Formaci√≥n personalizada** (empresa del grupo)
- Onboarding completo del equipo

#### OTROS
- Reportes y analytics b√°sicos
- Exportaci√≥n avanzada de datos

---

### ENTERPRISE - 500‚Ç¨/mes

#### USUARIOS Y ACCESO
- Hasta 7 usuarios
- Todo lo de BUSINESS
- Usuarios adicionales: consultar

#### INTEGRACIONES ‚≠ê NUEVO
- **API access para automatizaci√≥n**
- **Integraci√≥n con ERP (SAP, Odoo, Holded, etc.)**
  - Presupuesto adicional seg√∫n complejidad
- Webhooks personalizados
- SSO (Single Sign-On) disponible

#### CONTRATOS Y PLANTILLAS
- Todo lo de BUSINESS
- Revisi√≥n legal de plantillas personalizadas (consultor√≠a)

#### SOPORTE Y SERVICIOS ‚≠ê NUEVO
- **Success Manager dedicado**
- **Formaci√≥n continua para el equipo**
- **Soporte VIP dedicado: Telegram + videollamadas prioritarias**
- Tiempo de respuesta: 2h laborables
- SLA garantizado (99.9% uptime)
- Onboarding enterprise (multisesi√≥n)

#### ANALYTICS Y REPORTING
- Dashboard avanzado con m√©tricas del equipo
- Reportes personalizados
- Exportaci√≥n masiva de datos

#### OTROS
- Prioridad en roadmap de features
- Revisi√≥n trimestral con Success Manager
- Acceso a betas y nuevas features

---

## üìä Tabla Comparativa de Features

| Feature | PRO 65‚Ç¨ | TEAM 150‚Ç¨ | BUSINESS 299‚Ç¨ | ENTERPRISE 500‚Ç¨ |
|---------|---------|-----------|---------------|-----------------|
| **Usuarios** | 1 | 3 | 4 | 7 |
| **Contratos ilimitados** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| **Consultas IA ilimitadas** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| **97 plantillas legales** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| **Canvas edici√≥n** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| **Firmas digitales** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| **Verificaci√≥n legal continua** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| **Chats compartidos equipo** | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| **Gesti√≥n permisos** | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| **Dashboard admin** | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| **Sube contratos propios** | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| **Modifica plantillas** | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| **Whitelabel (tu logo)** | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| **Formaci√≥n personalizada** | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| **Videollamadas apoyo** | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| **Success Manager** | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| **API access** | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| **Integraci√≥n ERP** | ‚ùå | ‚ùå | ‚ùå | ‚úÖ* |
| **SLA garantizado** | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| **Soporte** | Chat 24h | Chat 12h | Chat+Video 4h | VIP 2h |
| **Trial gratis** | 14 d√≠as | 14 d√≠as | 14 d√≠as | Demo + 14 d√≠as |

*Presupuesto adicional seg√∫n complejidad

---

## üí¨ Copy y Propuesta de Valor

### PRO - 65‚Ç¨/mes

**Headline:** Contratos legales verificados. Sin l√≠mites. Sin sorpresas.

**Subheadline:** Todo lo que necesitas para operar con tranquilidad legal. Desde el primer d√≠a.

**CTA:** Empieza AHORA - Gratis 14 d√≠as

**Bullets:**
- ‚úÖ Contratos ilimitados cada mes
- ‚úÖ 97 plantillas verificadas por sistema legal robusto
- ‚úÖ Consultas legales IA 24/7 sin l√≠mite
- ‚úÖ Canvas de edici√≥n en tiempo real
- ‚úÖ Firmas digitales integradas
- ‚úÖ Validez legal certificada
- ‚úÖ Soporte 24/7 por Telegram
- ‚úÖ Sin permanencia - Cancela cuando quieras

---

### TEAM - 150‚Ç¨/mes

**Headline:** Tu equipo. Tus contratos. Una sola plataforma.

**Subheadline:** Colabora, controla permisos y escala tu agencia con total seguridad legal.

**Badge:** M√°s popular para equipos

**CTA:** Prueba TEAM 14 d√≠as gratis

**Bullets:**
- üöÄ **Hasta 3 usuarios** con gesti√≥n de permisos
- üí¨ **Chats compartidos entre equipo** (decide qui√©n ve qu√©)
- üìÇ Templates y carpetas compartidas
- ‚úÖ Todo lo de PRO: contratos + consultas ilimitadas
- üéØ Dashboard de administraci√≥n
- ‚ö° Soporte prioritario (12h)
- üìö Onboarding inicial incluido

**Ideal para:** Agencias peque√±as con 2-3 agentes que necesitan colaborar

---

### BUSINESS - 299‚Ç¨/mes

**Headline:** Tu marca. Tus contratos. Tu forma de trabajar.

**Subheadline:** Personaliza todo: sube tus contratos, modifica plantillas, a√±ade tu logo. Formaci√≥n incluida.

**Badge:** Recomendado para agencias

**CTA:** Solicita demo personalizada

**Bullets:**
- üè¢ **Hasta 4 usuarios** + Todo lo de TEAM
- üé® **Whitelabel: Tu logo en todos los contratos**
- üìÑ **Sube tus propios contratos personalizados**
- ‚úèÔ∏è **Modifica plantillas existentes a tu gusto**
- üéì **Formaci√≥n personalizada** con empresa del grupo
- üìû **Videollamadas de apoyo** cuando las necesites
- ‚ö° Soporte prioritario (4h)
- üìä Reportes y analytics b√°sicos

**Ideal para:** Agencias medianas que necesitan personalizaci√≥n y su propia imagen de marca

---

### ENTERPRISE - 500‚Ç¨/mes

**Headline:** Soluci√≥n enterprise. Soporte dedicado. Tu infraestructura.

**Subheadline:** Success Manager, integraciones con tu ERP, formaci√≥n continua y soporte VIP.

**Badge:** Enterprise

**CTA:** Hablar con ventas

**Bullets:**
- üèÜ **Hasta 7 usuarios** + Todo lo de BUSINESS
- üë§ **Success Manager dedicado** para tu cuenta
- üîó **Integraci√≥n con tu ERP** (SAP, Odoo, Holded)*
- üîå **API access** para automatizaci√≥n completa
- üéì **Formaci√≥n continua** para todo el equipo
- üìû **Soporte VIP dedicado** (respuesta en 2h)
- üìà Dashboard avanzado + reportes personalizados
- üõ°Ô∏è **SLA garantizado** (99.9% uptime)
- üîê SSO (Single Sign-On) disponible
- üöÄ Prioridad en nuevas features

*Integraci√≥n ERP bajo presupuesto adicional seg√∫n complejidad

**Ideal para:** Grandes grupos inmobiliarios, franquicias y empresas que necesitan integraci√≥n total

---

## üÜö An√°lisis Competitivo: LEXY vs virtualmike.net

### virtualmike.net (MIKE)

| Plan | Precio | Usuarios | Consultas | Contratos | Soporte |
|------|--------|----------|-----------|-----------|---------|
| BASIC | 19‚Ç¨ | 1 | 50/mes | ‚ùå No | WhatsApp |
| PREMIUM | 69‚Ç¨ | 1 | 100/mes | 150 templates | WhatsApp + Web |
| ENTERPRISE | 199‚Ç¨ | 2 | Ilimitado | 300+ templates | VIP + API |

### LEXY (Nuestra propuesta)

| Plan | Precio | Usuarios | Consultas | Contratos | Diferenciador |
|------|--------|----------|-----------|-----------|---------------|
| PRO | 65‚Ç¨ | 1 | ‚úÖ Ilimitado | ‚úÖ Ilimitado | Verificaci√≥n legal robusta |
| TEAM | 150‚Ç¨ | 3 | ‚úÖ Ilimitado | ‚úÖ Ilimitado | Chats compartidos + permisos |
| BUSINESS | 299‚Ç¨ | 4 | ‚úÖ Ilimitado | ‚úÖ Ilimitado | Whitelabel + formaci√≥n + custom |
| ENTERPRISE | 500‚Ç¨ | 7 | ‚úÖ Ilimitado | ‚úÖ Ilimitado | Success Manager + ERP |

### Ventajas competitivas de LEXY

1. **Sin l√≠mites artificiales:** Consultas y contratos ilimitados en TODOS los planes
2. **Verificaci√≥n legal robusta:** Sistema de verificaci√≥n continua sin acceso a datos sensibles
3. **Privacidad total:** Ning√∫n abogado ni empleado accede a datos del cliente
4. **Servicios humanos premium:** Formaci√≥n real, videollamadas, success manager
5. **Whitelabel desde 299‚Ç¨:** vs. no disponible en MIKE
6. **M√°s usuarios en tiers altos:** 7 usuarios vs 2 de MIKE Enterprise
7. **Trial consistente:** 14 d√≠as en todos los planes

### Diferenciaci√≥n clave

**LEXY no compite en precio de entrada (65‚Ç¨ vs 19‚Ç¨ de MIKE), compite en:**
- Garant√≠a legal real (sistema de verificaci√≥n robusto)
- Sin l√≠mites en consultas/contratos
- Servicios de valor a√±adido (formaci√≥n, success manager)
- Privacidad y confidencialidad total
- Personalizaci√≥n (whitelabel, contratos custom)

---

## üõ†Ô∏è Gu√≠a de Implementaci√≥n T√©cnica

### Fase 1: Backend (Stripe + Base de datos)

#### 1.1 Crear productos en Stripe

```bash
# Producto PRO
stripe products create \
  --name "LEXY PRO" \
  --description "Plan individual para agentes inmobiliarios"

# Price PRO (mensual)
stripe prices create \
  --product prod_xxx \
  --unit-amount 6500 \
  --currency eur \
  --recurring[interval]=month \
  --lookup-key "pro_monthly"

# Producto TEAM
stripe products create \
  --name "LEXY TEAM" \
  --description "Plan para equipos de hasta 3 usuarios"

# Price TEAM
stripe prices create \
  --product prod_yyy \
  --unit-amount 15000 \
  --currency eur \
  --recurring[interval]=month \
  --lookup-key "team_monthly"

# Producto BUSINESS
stripe products create \
  --name "LEXY BUSINESS" \
  --description "Plan para agencias con personalizaci√≥n"

# Price BUSINESS
stripe prices create \
  --product prod_zzz \
  --unit-amount 29900 \
  --currency eur \
  --recurring[interval]=month \
  --lookup-key "business_monthly"

# Producto ENTERPRISE (contactar ventas - no auto-checkout)
stripe products create \
  --name "LEXY ENTERPRISE" \
  --description "Soluci√≥n enterprise para grandes grupos"
```

#### 1.2 Variables de entorno

A√±adir a `.env.local`:

```env
# Stripe Products
STRIPE_PRICE_ID_PRO=price_xxx
STRIPE_PRICE_ID_TEAM=price_yyy
STRIPE_PRICE_ID_BUSINESS=price_zzz
STRIPE_PRICE_ID_ENTERPRISE=price_www  # Solo para referencia, no checkout directo
```

#### 1.3 Schema de base de datos (extensi√≥n)

```sql
-- A√±adir a tabla users
ALTER TABLE users ADD COLUMN plan_tier VARCHAR(50) DEFAULT 'pro';
-- Valores: 'pro', 'team', 'business', 'enterprise'

ALTER TABLE users ADD COLUMN max_users INT DEFAULT 1;
ALTER TABLE users ADD COLUMN features JSONB DEFAULT '{}';
-- Ejemplo features: {"whitelabel": true, "custom_contracts": true, "api_access": true}

-- Nueva tabla para team management
CREATE TABLE team_members (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  organization_id UUID REFERENCES organizations(id),
  user_id UUID REFERENCES users(id),
  role VARCHAR(50), -- 'admin', 'member', 'viewer'
  permissions JSONB, -- {"view_all_chats": true, "edit_contracts": false}
  created_at TIMESTAMP DEFAULT NOW()
);

-- Nueva tabla para chats compartidos
ALTER TABLE chats ADD COLUMN shared_with_team BOOLEAN DEFAULT false;
ALTER TABLE chats ADD COLUMN visible_to JSONB DEFAULT '[]';
-- Ejemplo: ["user_id_1", "user_id_2"]
```

---

### Fase 2: Frontend - Componente Pricing

#### 2.1 Estructura de archivos

```
components/sections/
  ‚îú‚îÄ‚îÄ Pricing.tsx              (refactorizar a multi-tier)
  ‚îî‚îÄ‚îÄ PricingCard.tsx          (componente individual por plan)

types/
  ‚îî‚îÄ‚îÄ pricing.ts               (tipos TypeScript)
```

#### 2.2 Types (pricing.ts)

```typescript
export type PlanTier = 'pro' | 'team' | 'business' | 'enterprise';

export interface PricingPlan {
  id: PlanTier;
  name: string;
  price: number;
  priceId: string;
  tagline: string;
  description: string;
  cta: string;
  badge?: string;
  maxUsers: number;
  features: string[];
  highlighted?: boolean;
  contactSales?: boolean;
}

export interface Feature {
  name: string;
  pro: boolean | string;
  team: boolean | string;
  business: boolean | string;
  enterprise: boolean | string;
}
```

#### 2.3 Datos de planes (pricingData.ts)

```typescript
export const plans: PricingPlan[] = [
  {
    id: 'pro',
    name: 'PRO',
    price: 65,
    priceId: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_PRO!,
    tagline: 'Todo lo que necesitas para operar legalmente sin l√≠mites',
    description: 'Para agentes inmobiliarios individuales',
    cta: 'Empieza AHORA',
    maxUsers: 1,
    features: [
      'Contratos ilimitados',
      'Consultas IA 24/7 ilimitadas',
      '97 plantillas legales verificadas',
      'Canvas de edici√≥n en tiempo real',
      'Firmas digitales integradas',
      'Verificaci√≥n legal continua',
      'Soporte 24/7 por Telegram',
      'Sin permanencia',
    ],
  },
  {
    id: 'team',
    name: 'TEAM',
    price: 150,
    priceId: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_TEAM!,
    tagline: 'Tu equipo. Tus contratos. Una sola plataforma.',
    description: 'Para agencias peque√±as (2-3 agentes)',
    cta: 'Prueba TEAM gratis',
    badge: 'M√°s popular',
    highlighted: true,
    maxUsers: 3,
    features: [
      'Hasta 3 usuarios',
      'Chats compartidos entre equipo',
      'Gesti√≥n de permisos',
      'Dashboard de administraci√≥n',
      'Todo lo de PRO incluido',
      'Soporte prioritario (12h)',
      'Onboarding inicial',
    ],
  },
  {
    id: 'business',
    name: 'BUSINESS',
    price: 299,
    priceId: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_BUSINESS!,
    tagline: 'Tu marca. Tus contratos. Tu forma de trabajar.',
    description: 'Para agencias medianas',
    cta: 'Solicita demo',
    badge: 'Recomendado',
    maxUsers: 4,
    features: [
      'Hasta 4 usuarios',
      'Whitelabel: Tu logo en contratos',
      'Sube tus contratos propios',
      'Modifica plantillas a tu gusto',
      'Formaci√≥n personalizada',
      'Videollamadas de apoyo',
      'Soporte prioritario (4h)',
      'Reportes y analytics',
    ],
  },
  {
    id: 'enterprise',
    name: 'ENTERPRISE',
    price: 500,
    priceId: process.env.NEXT_PUBLIC_STRIPE_PRICE_ID_ENTERPRISE!,
    tagline: 'Soluci√≥n enterprise con soporte dedicado',
    description: 'Para grandes grupos inmobiliarios',
    cta: 'Hablar con ventas',
    badge: 'Enterprise',
    maxUsers: 7,
    contactSales: true,
    features: [
      'Hasta 7 usuarios',
      'Success Manager dedicado',
      'Integraci√≥n con ERP*',
      'API access',
      'Formaci√≥n continua',
      'Soporte VIP (2h)',
      'SLA garantizado 99.9%',
      'Dashboard avanzado',
      'SSO disponible',
    ],
  },
];
```

#### 2.4 Tabla comparativa de features

```typescript
export const comparisonFeatures: Feature[] = [
  { name: 'Usuarios', pro: '1', team: '3', business: '4', enterprise: '7' },
  { name: 'Contratos ilimitados', pro: true, team: true, business: true, enterprise: true },
  { name: 'Consultas IA ilimitadas', pro: true, team: true, business: true, enterprise: true },
  { name: 'Plantillas legales', pro: '97', team: '97', business: '97', enterprise: '97' },
  { name: 'Chats compartidos equipo', pro: false, team: true, business: true, enterprise: true },
  { name: 'Gesti√≥n permisos', pro: false, team: true, business: true, enterprise: true },
  { name: 'Sube contratos propios', pro: false, team: false, business: true, enterprise: true },
  { name: 'Whitelabel (tu logo)', pro: false, team: false, business: true, enterprise: true },
  { name: 'Formaci√≥n personalizada', pro: false, team: false, business: true, enterprise: true },
  { name: 'Videollamadas apoyo', pro: false, team: false, business: true, enterprise: true },
  { name: 'Success Manager', pro: false, team: false, business: false, enterprise: true },
  { name: 'API access', pro: false, team: false, business: false, enterprise: true },
  { name: 'Integraci√≥n ERP', pro: false, team: false, business: false, enterprise: '‚úì*' },
  { name: 'Soporte', pro: 'Chat 24h', team: 'Chat 12h', business: 'Chat+Video 4h', enterprise: 'VIP 2h' },
];
```

---

### Fase 3: API Routes

#### 3.1 Checkout por tier (app/api/checkout/route.ts)

```typescript
import { NextRequest, NextResponse } from 'next/server';
import Stripe from 'stripe';

const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {
  apiVersion: '2023-10-16',
});

const PRICE_IDS: Record<string, string> = {
  pro: process.env.STRIPE_PRICE_ID_PRO!,
  team: process.env.STRIPE_PRICE_ID_TEAM!,
  business: process.env.STRIPE_PRICE_ID_BUSINESS!,
};

export async function POST(req: NextRequest) {
  try {
    const { tier } = await req.json();

    // Validar tier
    if (!['pro', 'team', 'business'].includes(tier)) {
      return NextResponse.json(
        { error: 'Invalid tier' },
        { status: 400 }
      );
    }

    // Enterprise requiere contacto con ventas
    if (tier === 'enterprise') {
      return NextResponse.json(
        { error: 'Enterprise plan requires sales contact', contactSales: true },
        { status: 400 }
      );
    }

    const session = await stripe.checkout.sessions.create({
      mode: 'subscription',
      payment_method_types: ['card'],
      line_items: [
        {
          price: PRICE_IDS[tier],
          quantity: 1,
        },
      ],
      success_url: `${process.env.NEXT_PUBLIC_APP_URL}/success?session_id={CHECKOUT_SESSION_ID}`,
      cancel_url: `${process.env.NEXT_PUBLIC_APP_URL}/?canceled=true`,
      subscription_data: {
        trial_period_days: 14,
        metadata: {
          tier,
        },
      },
      metadata: {
        tier,
      },
    });

    return NextResponse.json({ url: session.url });
  } catch (error) {
    console.error('Checkout error:', error);
    return NextResponse.json(
      { error: 'Error creating checkout session' },
      { status: 500 }
    );
  }
}
```

---

### Fase 4: Hook useCheckout actualizado

```typescript
// components/useCheckout.ts
import { useState } from 'react';

export type PlanTier = 'pro' | 'team' | 'business' | 'enterprise';

export function useCheckout() {
  const [loading, setLoading] = useState(false);

  const startCheckout = async (tier: PlanTier) => {
    setLoading(true);
    try {
      // Enterprise requiere contacto
      if (tier === 'enterprise') {
        window.location.href = 'mailto:ventas@lexy.plus?subject=Consulta Plan Enterprise';
        return;
      }

      const response = await fetch('/api/checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ tier }),
      });

      const data = await response.json();

      if (data.url) {
        window.location.href = data.url;
      } else if (data.contactSales) {
        alert('Por favor contacta con ventas para el plan Enterprise');
      }
    } catch (error) {
      console.error('Error:', error);
      alert('Error al iniciar el checkout');
    } finally {
      setLoading(false);
    }
  };

  return { startCheckout, loading };
}
```

---

### Fase 5: Dise√±o UI/UX

#### Layout sugerido

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   HEADLINE                           ‚îÇ
‚îÇ            Encuentra el plan perfecto                ‚îÇ
‚îÇ                                                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PRO    ‚îÇ   TEAM   ‚îÇ BUSINESS ‚îÇENTERPRISE‚îÇ
‚îÇ   65‚Ç¨    ‚îÇ   150‚Ç¨   ‚îÇ   299‚Ç¨   ‚îÇ   500‚Ç¨   ‚îÇ
‚îÇ          ‚îÇ  BADGE   ‚îÇ  BADGE   ‚îÇ  BADGE   ‚îÇ
‚îÇ Features ‚îÇ Features ‚îÇ Features ‚îÇ Features ‚îÇ
‚îÇ   CTA    ‚îÇ   CTA    ‚îÇ   CTA    ‚îÇ   CTA    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ                                                       ‚îÇ
‚îÇ          TABLA COMPARATIVA (expandible)              ‚îÇ
‚îÇ                                                       ‚îÇ
‚îÇ          FAQ sobre planes (opcional)                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### Recomendaciones de dise√±o

1. **Destacar TEAM con badge "M√°s popular"**
2. **BUSINESS con badge "Recomendado para agencias"**
3. **ENTERPRISE diferenciado visualmente** (borde dorado, fondo gradiente sutil)
4. **Tabla comparativa colapsable** para no abrumar
5. **Animaciones escalonadas** (Framer Motion) al entrar en viewport
6. **Hover states claros** en cada card
7. **Trial badge visible** en todos excepto Enterprise (que tiene "Demo")

---

### Fase 6: Testing y QA

#### Checklist de testing

- [ ] Stripe checkout funciona para PRO, TEAM, BUSINESS
- [ ] Enterprise redirige a contacto de ventas
- [ ] Trial de 14 d√≠as se aplica correctamente
- [ ] Metadata de tier se guarda en Stripe
- [ ] Responsive design en mobile
- [ ] Animaciones fluidas
- [ ] Copy claro y sin typos
- [ ] Links de CTA funcionan
- [ ] Precios mostrados coinciden con Stripe
- [ ] Badges visibles y bien posicionados
- [ ] Tabla comparativa es legible

---

## üìà M√©tricas de √âxito

### KPIs a trackear

1. **Conversi√≥n por tier:**
   - % clientes que eligen cada plan
   - Objetivo: 40% PRO, 35% TEAM, 20% BUSINESS, 5% ENTERPRISE

2. **Revenue mix:**
   - ARR (Annual Recurring Revenue) por tier
   - Objetivo: BUSINESS + ENTERPRISE > 60% del revenue total

3. **Upselling:**
   - % clientes que upgradean de PRO ‚Üí TEAM ‚Üí BUSINESS
   - Tiempo medio hasta upgrade

4. **Churn por tier:**
   - ¬øQu√© tier tiene mejor retenci√≥n?
   - Objetivo: BUSINESS/ENTERPRISE < 5% churn mensual

5. **Trial to paid:**
   - % conversi√≥n despu√©s de 14 d√≠as trial
   - Objetivo: > 25% conversi√≥n

---

## üöÄ Pr√≥ximos Pasos

### Orden de implementaci√≥n

1. **Backend:** Configurar productos y prices en Stripe ‚úÖ
2. **Database:** Extender schema para multi-tier ‚úÖ
3. **API Routes:** Crear endpoint de checkout por tier ‚úÖ
4. **Frontend:** Refactorizar componente Pricing ‚è≥
5. **Testing:** QA completo en Stripe test mode ‚è≥
6. **Deploy:** Ir a producci√≥n con precios reales ‚è≥
7. **Marketing:** Actualizar landing /urgente con nuevos planes ‚è≥
8. **Documentaci√≥n:** Actualizar README y docs internas ‚è≥

---

## üìù Notas Importantes

### Features en roadmap (post-lanzamiento)

- [ ] **Annual plans** con descuento (15% off)
- [ ] **Add-ons** opcionales (usuarios extra, integraciones espec√≠ficas)
- [ ] **Plan Free** limitado para lead generation
- [ ] **Whitelabel como add-on** en TEAM (+50‚Ç¨/mes)
- [ ] **API access como add-on** en BUSINESS (+100‚Ç¨/mes)

### Decisiones pendientes

- ¬øOfrecer descuento por pago anual?
- ¬øCrear plan Free limitado (3 contratos/mes)?
- ¬øPermitir add-ons o mantener tiers fijos?
- ¬øC√≥mo manejar usuarios adicionales en ENTERPRISE?

---

## ‚úÖ Changelog

**2026-01-20 - v1.0**
- Dise√±o inicial de 4 tiers: PRO, TEAM, BUSINESS, ENTERPRISE
- Features detalladas por tier
- Tabla comparativa completa
- Copy y propuesta de valor
- Gu√≠a de implementaci√≥n t√©cnica

---

**Documento aprobado para implementaci√≥n**
**Pr√≥ximo paso:** Refactorizar componente Pricing.tsx
